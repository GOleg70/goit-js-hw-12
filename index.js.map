{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst MY_API_KEY = \"50762825-7fe49127b3d94f6c93c99dfe1\";\n\nexport async function getImagesByQuery(query, currentPage = 1) {\n    const imageType = \"photo\";\n    const orientation = \"horizontal\";\n    const safesearch = true;\n    const perPage = 15;\n\n    const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: MY_API_KEY,\n            q: query,\n            image_type: imageType,\n            orientation: orientation,\n            safesearch: safesearch,\n            per_page: perPage,\n            page: currentPage,\n        },\n    });\n    return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst itemUl = document.querySelector(\".gallery\");\nconst loaderWrapper = document.querySelector(\".loader-wrapper\");\nconst btnMore = document.querySelector(\".formBtnMore\");\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const galleryMarkup = images\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                </a>\n                <div class=\"info\">\n                    <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n                    <p class=\"info-item\"><b>Views:</b> ${views}</p>\n                    <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n                    <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n                </div>\n            </li>\n        `)\n        .join(\"\");\n\n    itemUl.insertAdjacentHTML('beforeend', galleryMarkup);\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    itemUl.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loaderWrapper.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoader() {\n    loaderWrapper.classList.add(\"is-hidden\");\n}\n\nexport function showLoadMoreButton() {                             \n    btnMore.classList.remove(\"is-hidden-btn\");\n}\n\nexport function hideLoadMoreButton() {                               \n    btnMore.classList.add(\"is-hidden-btn\");\n}\n\n\nexport function scrollPage() {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2, \n        behavior: 'smooth'\n    });\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    hideLoadMoreButton,\n    showLoadMoreButton,\n    lightbox,\n    scrollPage,\n} from './js/render-functions.js';\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nlet totalPages = 0; \nconst perPage = 15;\n\nconst btnMore = document.querySelector(\".formBtnMore\");\nbtnMore.addEventListener(\"click\", handleClickBtnMore);\n\nasync function handleClickBtnMore() {\n    currentPage++;\n    hideLoadMoreButton();\n    showLoader();\n    try {\n         \n        const dataMore = await getImagesByQuery(currentQuery, currentPage);\n        createGallery(dataMore.hits);\n        lightbox.refresh();\n        scrollPage();\n    \n        if (currentPage >= totalPages) {\n            hideLoadMoreButton();\n\n            iziToast.info\n                ({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: \"topRight\"\n                });\n        } else {\n            showLoadMoreButton();\n        }\n    }\n    catch (error) {\n            iziToast.info({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\"\n            });\n            showLoadMoreButton();\n        return;\n    }\n    \n    finally {\n        hideLoader();\n       }\n}\n\n\nconst form = document.querySelector(\".form\");\nform.addEventListener(\"submit\", handleClick);\n\n\nasync function handleClick(event) {\n    event.preventDefault();\n    currentQuery = event.target.elements['search-text'].value.trim();\n    currentPage = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    \n    if (currentQuery === \"\") {\n        iziToast.info({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\"\n        });\n        return;\n    }\n    showLoader();\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        const images = data.hits;\n        totalPages = Math.ceil(data.totalHits / perPage);\n            \n           \n\n        if (images.length === 0) {\n            iziToast.info({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\"\n            });\n            return;\n        }\n\n        createGallery(images);\n        iziToast.success({\n            message: `We found ${data.totalHits} images.`,\n            position: \"topRight\"\n        });\n        if (currentPage < totalPages) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\"\n            });\n        }\n    }\n        catch (error) {\n            console.error(\"Помилка отримання зображень:\", error);\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\"\n            });\n        }\n        finally {\n            hideLoader();\n            event.target.reset();\n        }\n    \n    \n\n    } \n\n    \n\n\n\n"],"names":["MY_API_KEY","getImagesByQuery","query","currentPage","axios","itemUl","loaderWrapper","btnMore","lightbox","SimpleLightbox","createGallery","images","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","scrollPage","cardHeight","currentQuery","totalPages","perPage","handleClickBtnMore","dataMore","iziToast","form","handleClick","event","data","error"],"mappings":"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"}